{"script":{"dependencies":[{"name":"@ubio/extension-list","version":"^1.2.1"}],"id":"5ec618a4-a033-45a3-9f4a-b6668f1f2daa","name":"New Script","contexts":{"items":[{"id":"b394b8a9-7104-410b-a3da-467a076b58a5","name":"<main>","type":"main","flowType":"normal","errorCode":null,"limit":1,"matchMode":"fast","resolve3dsecure":true,"matchers":{"items":[]},"definitions":{"items":[]},"children":{"items":[{"id":"287ae78a-b8e1-49a2-aaf8-356717241f2f","label":"","notes":"","rejectHttpErrors":true,"rejectNetworkErrors":true,"openNewTab":false,"closeOtherTabs":false,"timeout":30000,"children":{"items":[]},"pipeline":{"items":[{"id":"af451683-4b25-4ec7-bbaf-8e96f6c7181d","label":"","notes":"","enabled":true,"value":"https://www.bbc.co.uk/sport/football","dataType":"string","type":"Value.getConstant"}]},"type":"Page.navigate"}]}},{"id":"3bd0cec7-89e3-4370-b4e9-8bf2e3e1b0fd","name":"BBC Sport Football Landing Page","type":"context","flowType":"normal","errorCode":null,"limit":1,"matchMode":"fast","resolve3dsecure":true,"matchers":{"items":[{"id":"95a86280-ade2-426d-9951-ec13cbb5eed6","label":"Football Scores","notes":"","children":{"items":[]},"pipeline":{"items":[{"id":"1c1ae643-f67f-4e86-9174-af15180ca73a","label":"","notes":"","enabled":true,"selector":".gs-u-display-none .qa-sport-scores-filter-heading","optional":false,"type":"DOM.queryOne"},{"id":"e9aa87e7-ff36-4eb4-be41-08e5ca987cda","label":"","notes":"","enabled":true,"type":"DOM.getText"},{"id":"0e8a49e4-7b39-4932-aaa9-d83ba5c77f2f","label":"","notes":"","enabled":true,"text":"Football Scores","type":"Value.containsText"},{"id":"a75ce927-61e2-4933-a90b-87e1839ec5f2","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('match context');\nreturn el;","type":"Eval.javascript"}]},"type":"matcher"}]},"definitions":{"items":[]},"children":{"items":[{"id":"5178ebef-03c2-4354-b8f3-744a96f04a25","label":"Close cookies","notes":"","optional":true,"children":{"items":[]},"pipeline":{"items":[{"id":"2540fc7a-32b6-496e-9a1c-d79858b116ae","label":"","notes":"","enabled":true,"selector":"button#bbcprivacy-continue-button","optional":true,"type":"DOM.queryOne"},{"id":"c32fdc26-146f-4490-989f-dbd1a4b52e00","label":"","notes":"","enabled":true,"type":"List.filterVisible"}]},"type":"Page.click"},{"id":"e961ac49-4ae5-43b4-b627-08e122480c7d","label":"Yes I agree","notes":"","optional":true,"children":{"items":[]},"pipeline":{"items":[{"id":"6e49c844-0d6c-488a-bf02-94a381d2b651","label":"","notes":"","enabled":true,"selector":"button#bbccookies-continue-button span","optional":true,"type":"DOM.queryAll"},{"id":"c37b58b2-4688-48a1-a61d-2bcc88ab5261","label":"","notes":"","enabled":true,"type":"List.filterVisible"}]},"type":"Page.click"},{"id":"c78c1353-8dbe-42b6-9f58-8725abc87828","label":"","notes":"","delay":1000,"children":{"items":[]},"type":"Flow.sleep"},{"id":"dec567a5-d002-4698-a50e-8106988e58e8","label":"Tables","notes":"","optional":false,"children":{"items":[]},"pipeline":{"items":[{"id":"eb880380-1977-4eb9-8dfc-5209c2eb5d9c","label":"","notes":"","enabled":true,"selector":"a.qa-secondary-item","optional":false,"type":"DOM.queryAll"},{"id":"a53d30b1-f434-4d5f-a173-f0c30c6a3e28","label":"","notes":"","enabled":true,"pipeline":{"items":[{"id":"99970735-9504-44c9-a28f-70c83c02cc98","label":"","notes":"","enabled":true,"type":"DOM.getText"},{"id":"6cd169f4-9a05-429d-a1be-a10633940c14","label":"","notes":"","enabled":true,"text":"Tables","type":"Value.equalsText"}]},"type":"List.filter"},{"id":"41d792c8-8678-4532-861b-4ced3abfb78d","label":"","notes":"","enabled":true,"mode":"element","expression":"this.from = this.from || {x: 0, y: 0};\nconst point = await el.remote.getClickablePoint();\nconst steps = 20;\nfor (let i=0; i<steps; i++) {\n  const interim = {\n    x: this.from.x + ((point.x-this.from.x)*i/steps),\n    y: this.from.y + ((point.y-this.from.y)*i/steps)\n  }\n\tawait el.remote.page.inputManager.mouseMove(interim);\n  this.from = interim;\n}\nreturn el;","type":"Eval.javascript"}]},"type":"Page.click"}]}},{"id":"0982d6f5-7e3b-45a1-8c9d-e3a6523908af","name":"Get Table","type":"context","flowType":"normal","errorCode":null,"limit":1,"matchMode":"fast","resolve3dsecure":true,"matchers":{"items":[{"id":"9a9abffc-1941-4b36-ad05-db4475f606db","label":"Premier League Table","notes":"","children":{"items":[]},"pipeline":{"items":[{"id":"7a6049c6-dbf7-43bc-874c-95496f74f70b","label":"","notes":"","enabled":true,"selector":"#page","optional":false,"type":"DOM.queryOne"},{"id":"e9d509b8-76aa-442d-b547-989c72ffc53d","label":"","notes":"","enabled":true,"type":"DOM.getText"},{"id":"d98d2cec-d880-44a8-aaf0-1758e959422d","label":"","notes":"","enabled":true,"text":"Premier League Table","type":"Value.containsText"},{"id":"53a4d51b-bead-44f8-ae89-870449eab15b","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('match context');\nreturn el;","type":"Eval.javascript"}]},"type":"matcher"}]},"definitions":{"items":[{"id":"a9b986d4-0ae7-471b-a10c-ad007ac0e749","label":"team table","notes":"","children":{"items":[]},"pipeline":{"items":[{"id":"4fcfa1cd-f2b5-4137-8385-edd33184d265","label":"","notes":"","enabled":true,"selector":"table.gs-o-table","optional":false,"type":"DOM.queryOne"},{"id":"20c31859-f249-4944-8d8c-60446e0547de","label":"","notes":"","enabled":true,"selector":"tbody tr","optional":false,"type":"DOM.queryAll"},{"id":"28f7cb10-96fb-4a4d-ac20-c0bca51d856b","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('team');\nreturn el;","type":"Eval.javascript"},{"id":"e076d15a-b39e-4af4-b50b-566338f6be00","label":"","notes":"","enabled":true,"path":"/data","onNull":"bypass","pipeline":{"items":[{"id":"9f7551d1-bc82-4c9b-b918-f6b00203202d","label":"","notes":"","enabled":true,"selector":"td","optional":false,"type":"DOM.queryAll"},{"id":"d938c39c-d603-4cb0-9d2a-94654e6838db","label":"","notes":"","enabled":true,"type":"DOM.getText"},{"id":"515730c2-7294-4ae4-ab67-4fb186b94803","label":"","notes":"","enabled":true,"type":"List.toArray"},{"id":"40a857b8-c6e2-4c72-8cd9-77258af8139c","label":"","notes":"","enabled":true,"mappings":[{"path":"/name","value":"/2"},{"path":"/played","value":"/3"},{"path":"/won","value":"/4"},{"path":"/drawn","value":"/5"},{"path":"/lost","value":"/6"},{"path":"/for","value":"/7"},{"path":"/against","value":"/8"},{"path":"/goalDifference","value":"/9"}],"mode":"replace","type":"Object.compose"}]},"type":"Object.setPath"},{"id":"d2020523-1e3f-4269-9d34-0284c90ccd4e","label":"","notes":"","enabled":true,"path":"/data","optional":false,"type":"Object.getPath"}]},"type":"definition"}]},"children":{"items":[{"id":"7b76e597-3c07-4686-a57d-785769327afc","label":"","notes":"","outputKey":"availableTeams","children":{"items":[]},"pipeline":{"items":[{"id":"2e5c2f25-9c58-4be8-80e2-b1f28176ff2d","label":"","notes":"","enabled":true,"definitionId":"a9b986d4-0ae7-471b-a10c-ad007ac0e749","type":"Definition.use"},{"id":"04e1d8a8-c594-4f58-85ae-991698e7dba2","label":"","notes":"","enabled":true,"type":"List.toArray"}]},"type":"Flow.output"},{"id":"d59711e1-2260-4508-aa7c-410e12ee9110","label":"Click on Team","notes":"","optional":false,"children":{"items":[]},"pipeline":{"items":[{"id":"4fb60fb9-92e1-4ee3-9d45-0b7cb7bf488e","label":"","notes":"","enabled":true,"selector":"a.gs-o-table__link","optional":false,"type":"DOM.queryAll"},{"id":"666035af-c44d-46bc-93bc-868c7221f9ff","label":"","notes":"","enabled":true,"pipeline":{"items":[{"id":"3cf953c1-a656-4609-b395-2d5bf5f9c432","label":"","notes":"","enabled":true,"pipelineA":{"items":[{"id":"f861f561-9696-4dc4-9578-b624e950e6b9","label":"","notes":"","enabled":true,"type":"DOM.getText"}]},"pipelineB":{"items":[{"id":"6edb92f7-dac8-4efc-8d14-853a7bdc038c","label":"","notes":"","enabled":true,"inputKey":"selectedTeam","type":"Value.getInput"},{"id":"54e2a9e8-303d-425b-9c28-fc9c2f0484ac","label":"","notes":"","enabled":true,"path":"/name","optional":false,"type":"Object.getPath"}]},"type":"Value.equals"}]},"type":"List.filterOne"},{"id":"c571156a-8f04-4d4b-a0e4-21cc234c0ec1","label":"","notes":"","enabled":true,"mode":"element","expression":"this.from = this.from || {x: 0, y: 0};\nconst point = await el.remote.getClickablePoint();\nconst steps = 20;\nfor (let i=0; i<steps; i++) {\n  const interim = {\n    x: this.from.x + ((point.x-this.from.x)*i/steps),\n    y: this.from.y + ((point.y-this.from.y)*i/steps)\n  }\n\tawait el.remote.page.inputManager.mouseMove(interim);\n  this.from = interim;\n}\nreturn el;","type":"Eval.javascript"}]},"type":"Page.click"}]}},{"id":"75feb163-0682-4728-9d73-69fac50772bc","name":"Team Page","type":"context","flowType":"normal","errorCode":null,"limit":1,"matchMode":"fast","resolve3dsecure":true,"matchers":{"items":[{"id":"43d7fef7-ebc8-479b-a4aa-e1b48d6c69cd","label":"Team Name","notes":"","children":{"items":[]},"pipeline":{"items":[{"id":"66814fcf-5003-4877-bc09-b00ae0a12f28","label":"","notes":"","enabled":true,"selector":"#main-heading","optional":false,"type":"DOM.queryOne"},{"id":"0d520b86-a7fc-4dd4-b1c0-7a0072ea6213","label":"","notes":"","enabled":true,"type":"List.exists"},{"id":"55066da3-673f-4104-8dca-1c871911168a","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('match context');\nreturn el;","type":"Eval.javascript"}]},"type":"matcher"}]},"definitions":{"items":[]},"children":{"items":[{"id":"57ec8f1d-da55-48f1-8727-c4588f246540","label":"","notes":"","optional":false,"children":{"items":[]},"pipeline":{"items":[{"id":"afc07ca1-9abd-44aa-a7e7-0a9903bb86f2","label":"","notes":"","enabled":true,"selector":"a.css-k664h9-StyledLink .css-14ac34w-LinkTextContainer","optional":false,"type":"DOM.queryAll"},{"id":"f0171ee9-de63-48ad-90af-d10743c3c6da","label":"","notes":"","enabled":true,"count":1,"type":"List.limit"},{"id":"8b99cd33-c0e8-4970-b6bc-2bb55027753f","label":"","notes":"","enabled":true,"mode":"element","expression":"this.from = this.from || {x: 0, y: 0};\nconst point = await el.remote.getClickablePoint();\nconst steps = 20;\nfor (let i=0; i<steps; i++) {\n  const interim = {\n    x: this.from.x + ((point.x-this.from.x)*i/steps),\n    y: this.from.y + ((point.y-this.from.y)*i/steps)\n  }\n\tawait el.remote.page.inputManager.mouseMove(interim);\n  this.from = interim;\n}\nreturn el;","type":"Eval.javascript"}]},"type":"Page.click"}]}},{"id":"6109ef34-2026-4c8b-8dde-8099e7a172bf","name":"Get Next Match","type":"context","flowType":"normal","errorCode":null,"limit":1,"matchMode":"fast","resolve3dsecure":true,"matchers":{"items":[{"id":"9338f105-e298-47fd-b766-93f8d85a12c9","label":"Scores & Fixtures","notes":"","children":{"items":[]},"pipeline":{"items":[{"id":"18507b5e-232f-4a53-8627-98c3755ce0a7","label":"","notes":"","enabled":true,"selector":"#page","optional":false,"type":"DOM.queryOne"},{"id":"fcf71245-92d8-4c49-b9b7-1860b1bca290","label":"","notes":"","enabled":true,"type":"DOM.getText"},{"id":"612f0398-3551-462f-b9da-6ee3a4d5300c","label":"","notes":"","enabled":true,"text":"Scores & Fixtures","type":"Value.containsText"},{"id":"6957f0ce-ae67-4070-8e71-fcedd743d6ff","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('match context');\nreturn el;","type":"Eval.javascript"}]},"type":"matcher"}]},"definitions":{"items":[]},"children":{"items":[{"id":"3dab0f7a-edb5-4166-a8d7-98d31b4d1f89","label":"no future fixtures showing","notes":"","limit":10,"children":{"items":[{"id":"bca5d33e-8aac-44c5-9aba-1e6735cde31a","label":"next month","notes":"","optional":true,"children":{"items":[]},"pipeline":{"items":[{"id":"873cd509-013e-42b1-8c1c-df5f467d8d1b","label":"","notes":"","enabled":true,"selector":".sp-c-date-picker-timeline__item--selected a.sp-c-date-picker-timeline__item-inner","optional":true,"type":"DOM.queryAll"},{"id":"18d72d44-4fed-4b96-9fec-8ba04c5bb332","label":"","notes":"","enabled":true,"count":3,"optional":false,"type":"DOM.parent"},{"id":"bb72b97d-0a04-4440-b532-c6e233c9a3b5","label":"","notes":"","enabled":true,"count":1,"optional":false,"type":"DOM.nextSibling"},{"id":"85b429a4-213d-4584-b6dd-faa960df9767","label":"","notes":"","enabled":true,"selector":"a.sp-c-date-picker-timeline__item-inner","optional":false,"type":"DOM.queryAll"},{"id":"f447b5c6-cdf1-4e8a-829d-9cc653e495f7","label":"","notes":"","enabled":true,"count":1,"type":"List.limit"},{"id":"0990c468-c2e3-4794-babb-1d881adba861","label":"","notes":"","enabled":true,"mode":"element","expression":"this.from = this.from || {x: 0, y: 0};\nconst point = await el.remote.getClickablePoint();\nconst steps = 20;\nfor (let i=0; i<steps; i++) {\n  const interim = {\n    x: this.from.x + ((point.x-this.from.x)*i/steps),\n    y: this.from.y + ((point.y-this.from.y)*i/steps)\n  }\n\tawait el.remote.page.inputManager.mouseMove(interim);\n  this.from = interim;\n}\nreturn el;","type":"Eval.javascript"}]},"type":"Page.click"},{"id":"e1ef1bf9-0a8d-4eb4-a569-47614181bd4a","label":"","notes":"","delay":1000,"children":{"items":[]},"type":"Flow.sleep"}]},"pipeline":{"items":[{"id":"6b65277c-56fe-40ca-9f47-a09ab2ecf71a","label":"","notes":"","enabled":true,"selector":".sp-c-fixture__team--time-home .gs-u-display-block\\@m","optional":true,"type":"DOM.queryAll"},{"id":"a366adcf-f655-483b-9dc7-b007f6f3806b","label":"","notes":"","enabled":true,"type":"List.exists"},{"id":"bd8ac911-d77e-4b95-9476-56701addf4db","label":"","notes":"","enabled":true,"type":"Boolean.not"}]},"type":"Flow.while"},{"id":"aef17ccb-5ae8-46b5-a2c5-d1172998a7dd","label":"","notes":"","outputKey":"nextMatch","children":{"items":[]},"pipeline":{"items":[{"id":"d68db5b9-0821-4968-b7bf-92b644ba1c38","label":"","notes":"","enabled":true,"path":"/date","onNull":"bypass","pipeline":{"items":[{"id":"fbf2ccfb-7854-4393-aeff-5688008ea096","label":"","notes":"","enabled":true,"selector":".sp-c-fixture__team--time-home .gs-u-display-block\\@m","optional":false,"type":"DOM.queryAll"},{"id":"e1f5a75e-6256-4265-b6df-8b5afae1d2c4","label":"","notes":"","enabled":true,"count":8,"optional":false,"type":"DOM.parent"},{"id":"17fe7844-a883-473b-a1e5-17d015619bed","label":"","notes":"","enabled":true,"selector":"h3","optional":false,"type":"DOM.queryAll"},{"id":"29cf90d7-348f-45bb-982d-def59e49aa97","label":"","notes":"","enabled":true,"count":1,"type":"List.limit"},{"id":"047023d4-9f4c-4a9c-8125-1782635b313b","label":"","notes":"","enabled":true,"attribute":"data-reactid","optional":false,"type":"DOM.getAttribute"},{"id":"5a4b735e-73b4-4ea5-b134-db52fc62cae0","label":"","notes":"","enabled":true,"mode":"value","expression":"return value.split('League').pop().split('.')[0]","type":"Eval.javascript"},{"id":"7b15ea35-f33f-4602-ad19-852fde28d2df","label":"","notes":"","enabled":false,"selector":"span","optional":false,"type":"DOM.queryAll"},{"id":"2bee7378-9277-4080-bc9e-e9b5e2e2bd7a","label":"","notes":"","enabled":false,"count":2,"type":"List.limit"},{"id":"6af6f8af-18f3-495f-ad05-aac368c0c38b","label":"","notes":"","enabled":true,"type":"List.toArray"},{"id":"b5e53d0d-c927-46b9-95a0-76800f83f1fb","label":"","notes":"","enabled":true,"mode":"value","expression":"return value.join(' ').replace(/\\-/g, ' ')","type":"Eval.javascript"},{"id":"7fe1f1c4-b734-4b6f-b117-3175be3a4551","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('date');\nreturn el;","type":"Eval.javascript"}]},"type":"Object.setPath"},{"id":"97abc6b5-796a-4d98-a7e7-055837e7cd19","label":"","notes":"","enabled":true,"path":"/home","onNull":"bypass","pipeline":{"items":[{"id":"8350638c-079a-4a38-9cdc-b8a5b597fbf3","label":"","notes":"","enabled":true,"selector":".sp-c-fixture__team--time-home .gs-u-display-block\\@m","optional":false,"type":"DOM.queryAll"},{"id":"84ebff55-0643-4a1f-86e6-fcbd52723cf0","label":"","notes":"","enabled":true,"count":1,"type":"List.limit"},{"id":"8b7b1a05-9dde-4d2f-adf1-510ec0951a94","label":"","notes":"","enabled":true,"type":"DOM.getText"},{"id":"3ec9ff0a-c490-4fa3-bb42-e06c2dca82d5","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('home');\nreturn el;","type":"Eval.javascript"}]},"type":"Object.setPath"},{"id":"e8f100fb-e7ae-4b9c-9ad0-cdbe982bc30a","label":"","notes":"","enabled":true,"path":"/away","onNull":"bypass","pipeline":{"items":[{"id":"f3b2569f-1fdf-4674-8057-956d659ca0f3","label":"","notes":"","enabled":true,"selector":".sp-c-fixture__team--time-away .gs-u-display-block\\@m","optional":false,"type":"DOM.queryAll"},{"id":"30384669-ccf8-42e9-85a4-42feee343600","label":"","notes":"","enabled":true,"count":1,"type":"List.limit"},{"id":"7e4bdd9c-edd3-4f3a-abf9-1b2543f75a12","label":"","notes":"","enabled":true,"type":"DOM.getText"},{"id":"72346b8a-89bc-4855-a9f6-98cc48b480ed","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('away');\nreturn el;","type":"Eval.javascript"}]},"type":"Object.setPath"},{"id":"fb165da0-c005-46e7-ae0b-322f0d597742","label":"","notes":"","enabled":true,"path":"/time","onNull":"bypass","pipeline":{"items":[{"id":"91c466cb-794f-48ca-9432-766de2d48217","label":"","notes":"","enabled":true,"selector":".sp-c-fixture__number","optional":false,"type":"DOM.queryAll"},{"id":"8f0c8033-fe46-4bbb-88ea-4192b6d3d9ce","label":"","notes":"","enabled":true,"count":1,"type":"List.limit"},{"id":"07bdb05f-8c6f-41a7-9aef-6b0ed921aae6","label":"","notes":"","enabled":true,"type":"DOM.getText"},{"id":"8cadf6d1-9cad-4ccd-86f1-fd01fb137e71","label":"","notes":"","enabled":true,"mode":"element","expression":"await el.tooltip('time');\nreturn el;","type":"Eval.javascript"}]},"type":"Object.setPath"}]},"type":"Flow.output"},{"id":"a9247eca-8cdd-48ba-90ec-ef3a6f54ff7d","label":"","notes":"","children":{"items":[]},"type":"Flow.success"}]}}]},"blockedUrlPatterns":["*://*/*.woff","*://*/*.woff2","*://*/*.ttf","*://*/*.otf","*://*.optimizely.com/","*://*.chartbeat.com/","*://*.edigitalsurvey.com/","*://*.doubleclick.net/","*://*.google.com/","*://*.googletagservices.com/","*://*.googlesyndication.com/","*://*.gstatic.com/","*://*.moatads.com/","*://*.permutive.com/","*://*.imrworldwide.com/","*://*.adnxs.com/","*://*.crwdcntrl.net/","*://*.gscontxt.net/","*://*.skimresources.com/","*://*.scorecardresearch.com/","*://*.effectivemeasure.net/","*://*.exelator.com/","*://*.everesttech.net/","*://*.w55c.net/","*://*.demdex.net/","*://*.cloudfunctions.net/","*://*.bbc.com/","*://*/*.js"]},"datasets":[{"name":"Input data","inputs":[{"key":"selectedTeam","stage":"","data":{"name":"Leeds"}}],"excluded":false}],"metadata":{"domainId":"Generic","draft":true,"scriptId":"9364e30f-10fe-447c-93ac-e7d4b9160a3d","serviceId":"4a67c98c-8ed3-4502-9495-c7b94da987d3","datasetsIndex":2,"inputKeys":["panToken"],"outputKeys":["object"]}}